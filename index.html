<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Penghantaran Data</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        button { font-size: 1.2em; padding: 10px 20px; cursor: pointer; }
        #response { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>Ujian Sambungan ke Google Apps Script</h1>
    <p>Tekan butang di bawah untuk menghantar data ujian ke skrip anda.</p>
    <button id="test-button">Hantar Ujian</button>
    
    <h2>Respons dari Server:</h2>
    <pre id="response">Menunggu untuk menghantar...</pre>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const googleAppScriptUrl = 'https://script.google.com/macros/s/AKfycbzpr9FtAOg9b0E4ru-vajMS1FQ1l5Puz1sT_FkzsP2xHQi0W3nArnOXOZoBn-q7zYwUBA/exec'; // <-- MASUKKAN URL DARI LANGKAH 1
        const testButton = document.getElementById('test-button');
        const responseArea = document.getElementById('response');

        testButton.addEventListener('click', function() {
            responseArea.textContent = 'Menghantar...';
            testButton.disabled = true;
            
            // Kita tidak hantar apa-apa data, hanya panggil doPost
            const formData = new FormData();
            formData.append("ujian", "123"); 

            fetch(googleAppScriptUrl, {
                method: 'POST',
                body: formData,
            })
            .then(res => res.json())
            .then(data => {
                // Paparkan apa sahaja yang dihantar balik oleh skrip
                responseArea.textContent = JSON.stringify(data, null, 2);
                alert('Ujian selesai! Sila semak Google Sheet anda di sel K1.');
            })
            .catch(error => {
                // Jika fetch gagal sepenuhnya (cth: masalah network, CORS)
                responseArea.textContent = 'RALAT KRITIKAL: Gagal menghubungi server.\n' + error.toString();
                alert('Ujian GAGAL! Sesuatu menghalang sambungan ke server.');
            })
            .finally(() => {
                testButton.disabled = false;
            });
        });
    });
    </script>
</body>
</html>